16.2有限ENVIRONMENTS
我们从有限的世界的重要的特殊情况下，我们考虑的。在这里，我们假设我们有一个有限状态空间，有限的许多行动在每个状态，不同的意见Ø数量有限，和有限规划周期T.在这些CON- ditions，最优值函数可以被精确计算，因为可以最优策略。这不是在所有明显。即使状态空间是有限的，其实有无限多的可能的信念。然而，在这一点，下面我们建立一个众所周知的结果是最优值函数是凸的有限多个线性部分组成。因此，即使该值函数被定义在一个连续体，它可在一数字计算机行动浮点数的精度来表示。
16.2.1说明性的例子
一个有限的世界的一个例子示于图16.1。这个具体的例子时极端简单的和人工的，其唯一的作用是读者熟悉POMDPs讨论前的关键问题，一般的解决方案。我们注意到，在世界
图16.1具有四种状态，标记S1至S4中，两个动作，a1和a2，和两个观察，标记O1和O2。初始状态是随机抽取来自两个顶端状态，s1和s2。现在机器人给出一个选择：执行动作A1，这将具有高概率（但不总是）瞬间移动到相应的其他状态。 Alterna-
疑心，它可以执行动作A2，这导致在这两个底状态，S3或S4的概率中的一个的转变所示。在S3中，机器人将收到一个大的正收益，而在S4的收益为负。这两个州是终端的状态，也就是说，一旦进入任务就结束了。因此，机器人的目标是要执行的动作
A2在状态S1时。如果机器人知道它是在什么状态，执行任务是非常简单：简单地套用动作A1，直到状态是S1，然后应用行动A2。然而，机器人不知道其状态。相反，它可以感知两个观测
TIONS O1和O2。不幸的是，这两个观测可能在这两种状态，虽然观察一比其他的概率不同，这取决于
什么状态的机器人是由于机器人并不知道它的初始状态是S1或S2，它必须仔细跟踪过去的观测来计算它的信念。因此，关键的政策问题是：什么时候应该机器人尝试动作A2？如何有信心，它必须得到，如何需要多长时间来尝试这个动作？这些和其他问题将得到回答进一步描述。
本节的目标是开发一种算法来计算最优值函数正是为了有限的世界与有限的地平线T.让我们表示计划通过地平线T和各州通过S1。。。 ，SN。利用状态空间的有限，
图16.1有限状态环境，用来说明价值迭代的信念空间。
我们注意到，信念B（S）由n个概率给出圆周率= B（S= SI）
其中i=1，。 。 。 ，N。信仰必须满足的条件PI≥0
ñ
？
PI=1
I = 1
（16.4）（16.5）
因为最后一个条件的，B（S）可通过n-1个参数p1的被指定。 。 。 ，PN-1而不是n个参数。剩余的概率的pn可以计算如下：
ñPN = 1
？
PI
I = 1
（16.6）。因此，如果状态空间是有限的大小为n的和，一个信念是一个（N-1）维向量。
在我们的图16.1示出的例子中，可能出现的是由三个数值的概率值指定的信念，因为有四个状态。然而，该操作
A2分体（肯定的）状态{S1，S2}从美国{S3，S4}。因此，该机器人可能遇到的唯一的不确定性是状态s1和s2，和状态S3和S4之间的混乱之间的混淆。既可以由一个单一的数值的概率值来表示，由此，信仰状态的唯一连续成分是一维的。这使得这个例子方便绘制值的函数。
现在，让我们专注于一个问题，我们是否可以计算出最优值函数，准确地在有限的领域最优策略。如果没有，我们可能会被迫以接近它。起初，人们可能会得出这样的结论计算最优值函数是不可能的，由于这一事实，即信念空间是连续的。但是，我们观察到的有限的世界，值函数有一个特殊的形状：它是由有限多个线性件。这使得能够计算在有限时间内的最优值函数。我们还注意到，价值函数是凸和连续这后两种特性也适用于最优值函数在连续状态空间和无限的规划视野。
我们开始的信念状态B的直接回报我们的考虑。回想一下，b的收益是由下概率分布B的收益C中的给定期望：
C（二）=？ C（S）B（S）DS（16.7）
使用使得b唯一地由概率p1指定的事实。 。 。 ，PN，我们可以写C（B）= C（P1，。，PN）=
ñ
？
C（SI）PI
I = 1
（16.8），它确实是线性p1中，。 。 。 ，PN。
图16.2期望收益C（B）为信念参数P3的功能，假设机器人无论是在状态S3或S4。
有趣的是绘制函数c（b）在置信度分布在两种状态S3和S4在我们的例子中，只有国家与非零回报。在状态S3回报
是100，而在状态S4的回报是-100。图16.2a示出了函数c（b）为相信通过？0,0，第3页，1-P3限定的子空间？这是一种信念的空间，放置在美国S3和S4所有的可能性。这里的期望C（b）的绘制为
函数的概率P3的。显然，如果P3 =0时，环境状态是S4，并回报将是C（S4）= -100。另一方面，如果P3 =1，环境的
状态是S3和回报将是C（S3）= 100。在此期间，期望是线性的，从而导致在图16.2a所示的曲线图。
这种考虑使我们能够计算价值函数规划地平线T = 1。从现在开始，我们将只考虑信念空间的地方的子集
在两种状态S1和S2所有的可能性。这种信念空间是由一个单一的参数参数化，p1的，因为P2 = 1 - P1和P3 = P4 = 0的值函数C1（二，a1）中是恒定的零行动A1：
C1（二，A1）= 0（16.9）
因为无论机器人的真实状态，动作A1不会导致它的状态，使得它收到非零的回报。该值函数C1（B，A1）如果绘制如图16.2b。图片变得更有趣行动A2。如果环境的状态是S1，这个动作将导致90％的几率状态S3，其中机器人将收到的100的收益有10％的概率会结束在状态S4，在那里它会回报
-100。因此，在状态S1的预期收益为0.9·100 + 0.1·（-100）= 80。类似的说法，状态S2的预期收益为-80。在这两者之间，期望是线性的，产生的价值函数
C1（B，A2）=γ（80p1 -80p2）= 72p1 -72p2（16.10）
这里我们使用的折现因子γ= 0.9。这个函数表示在图16.2c，该类型的信念？P1，1-P1，0，0℃。
那么，什么是正确的行动选择策略？继最大化预计这将对收益的理由，最好的行动取决于我们目前的信念，假设它准确
反映了我们对现实世界的知识。如果概率P1≥0.5，最佳动作将A2，因为我们期望正回报。对于值小于0.5，最佳动作将A1，因为它避免了与动作A2相关的负面预期收益。对应的价值功能的动作特定值功能最大：
C1（B）=最大为C1（B，A）
=最大值{0; 72p1-72p2}（16.11）
该值函数和动作选择了相应的政策由图16.2d，从而最大程度地说明了两个线性成分的固体图所示
由虚线。我们注意到，这个数值函数不是线性的任何更长的时间。相反，它是分段线性和凸出的。非线性产生的事实，不同的操作是最佳的信念空间的不同部分。
从图16.2d的价值功能，我们可以得出结论，信仰P1 <0.5是没有办法获得的收益大于0？当然，答案是否定的。该
值函数C1（b）是仅最适合于地平线T = 1。对于较大的视野，也能够先执行动作A1，接着动作A2。执行动作A1具有两个有益效果：首先，它有助于我们估计当前状态更好，由于这样的事实，在我们可以感知，并且第二，以高概率从s1至s2的，或反之亦然改变状态。因此，一个良好的政策可能会执行的动​​作A1，直到我们有理由相信，机器人的状态是S1。然后，机器人应执行的动作A2。
为了使这个比较正规的，让我们得出的最优值函数的地平线T = 2，假设我们执行的动作A1。然后，两件事情可能发生：我们要么遵守O1 O2或。让我们先假设我们观察到O1。那么新的信仰状态可以使用贝叶斯过滤器来计算：
2个P？ 1 =η1P（O 1？|？第1条）
？
P（S 1 |？A1，SI）PI
I = 1
=η10.7（0.1p1 + 0.8p2）=η1（0.07p1 + 0.56p2）
（16.12）
其中，η1是贝叶斯法则的正规化。同样，我们得到的是S2后概率：
2 p? 2 = η1 P(o? 1|s? 2)
?
P(s? 2|a1, si) pi
i=1
= η1 0.4(0.9p1 +0.2p2) = η1 (0.36p1 +0.08p2)
(16.13) Since we know that p? 1 + p? 2 = 1—after all, when executing action a1 the state will
either be s1 or s2—we obtain for η1: η1 =
1 0.07p1 +0.56p2 +0.36p1 +0.08p2 = 1 0.43p1 +0.64p2 (16.14)
我们也注意到，变量η1是一个有用的概率：这是执行的动作A1（无论后状态的）后观察O1的概率。
我们现在有表情刻画因为我们执行AC-后信念
A1化观察O1。那么，什么是这个国家的信仰价值？答案是转播tained通过插入新的信仰到价值函数C1（b）的公式定义（16.11），和γ贴现的结果：
C2（B，A1，01）=γ最大值{0; 72P？ 1 -72p？ 2}
= 0.9最大值{0; 72η1（0.36p1 + 0.08p2）-72η1（0.43p1 + 0.64p2）} = 0.9最大值{0; 72η1（0.36p1 + 0.08p2 -0.43p1 -0.64p2）} = 0.9最大值{0; 72η1（-0.07p1 -0.56p2）} = 0.9最大值{0; η1（-5.04p1 -40.32p2）}
（16.15）
我们现在移动的因素η1出来的最大化和移动0.9里面，并取得：C2（B，A1，01）=η1最大值{0; -4.563p1 -36.288p2}
（16.16），其是一个分段线性的，凸的函数的信念b的参数。
推导的执行行动A1后观察O2是完全类似。特别是，我们得到的后验
p?
1 = η2 0.3(0.1p1 +0.8p2) = η2 (0.03p1 +0.24p2)
p?
2 = η2 0.6(0.9p1 +0.2p2) = η2 (0.54p1 +0.12p2)
with the normalizer η2 =
1 0.57p1 +0.36p2
The corresponding value is C2(b, a1, o1) = γ max{0 ; 72p?
1 −72p? 2} = η2 max{0 ; −33.048p1 +7.776p2} (16.17) (16.18) (16.19)
顺便说一句，我们也注意到，η-1 1 +η-1 2 = 1。这直接遵循这样的事实
在贝叶斯正规化过滤是观察概率ηI=
1 P（O I |？A1，B）（16.20）和事实恰好有两种可能的观测我们的例子中，O1和O2。
现在让我们计算值C2（二，a1）中，这是在执行动作A1的预期值。显然，该值是值C2（二，A1，01）和C2（二，A1，O2），通过实际观察O1和O2分别的概率加权的混合物。放入数学符号，我们有
C2（二，A1）= 2
？
C2（B，A1，OI）P（OI | A1，B）
I = 1
（16.21）
术语C 2（二，A1，OI）已经如上所定义。概率P（OI | A1，B）执行动作A1之后观察OI是η-1
我。因此，我们有所有成分
计算所需值C2（二，a1）中：C2（二，A1）=η-1
1η1最大值{0; -4.563p1 -36.288p2} +η-1
2η2最大值{0; -33.048p1 + 7.776p2}（16.22）= MAX {0; -4.563p1 -36.288p2} +最大{0; -33.048p1 + 7.776p2}
该表达式可以被重新表示为四个线性函数的最大值：C2（二，A1）=最大{0; -4.563p1-36.288p2;
（16.23）-33.048p1+7.776p2; -37.611p1-28.512p2}
图16.2e表示这四个线性函数的信念间隔p1，1 - P 2，0，0℃。该值函数C2（B，A1）是这四个线性函数的最大值。由于是
容易被看到的那样，二者的这些功能是足以定义最大;其他
2顷在整个频谱较小。这使我们能够改写的C2（二，a1）中为最大值的仅有的两个方面，而不是四个：C2（二，A1）=最大{0; -33.048p1+7.776p2}
（16.24）
最后，我们要确定的值C2（b）中，这是下面两个条件中的最大值：
C2（B）=最大{C2（二，a1）中，C 2（二，A2）}（16.25）
正如很容易地验证，则第二项的最大化，C2（二，a2）中，是完全与上述相同的用于规划地平线T = 1：
C2（二，A2）= C1（二，A2）= 72p1 -72p2
因此，我们获得（16.24）和（16.26）：
（16.26）
C2（B）=最大{0; -33.048p1 + 7.776p2; 72p1 -72p2}
（16.27）这个函数是最优值函数规划地平线T.图？图
C2（b）和其组成部分的信念子空间P1，1 - P 2，0，0℃。正如很容易看到的，函数是分段线性和凸出的。特别是，它包括三个
线性件。对于在最左边的两个片信仰（​​即P1 <0.5），A1是最佳的行动。对于P1 = 0.5，这两个动作都是一样的好。对应于最右边的线性片的信念，即用P1> 0.5的信念，有最佳的动作A2。如果a1为最优函数，下一个动作取决于在信念空间的初始点和在观察。
价值函数C 2（b）是仅最适合于地平线2。但是，我们的分析示出了几个重要的观点。
首先，最优值函数的任何有限的视距是连续的，分段线性，凸。每个线性一块对应于一个不同的操作选择在将来某个时候，或者，可以进行不同的观察。价值函数的凸性表示相当直观的观察，即明知是AL-方面都优于不知道。给定两个信念状态B和B?,的信念状态的混合值大于或等于该混合信念状态的值，对于某些混合参数β0≤β≤1：
βC（二）+（1-β）C（二？）≥-C（βB+（1-β）B'）（16.28）
二，直线条的数量可以极大地增长，特别是如果一个人不注重线性函数变得过时。在我们的玩具例子中，两个出的四个直线约束限定的C2（二，a1）的是没有必要。 EF-ficiently实施POMDPs的“诀窍”在于早识别过时线性函数
如可能，从而使计算的价值函数时，没有计算被浪费。不幸的是，即使我们仔细排除一切不必要的线性约束，线性函数的num- BER仍然可以增长得非常迅速。这对对有限POMDPs的精确值迭代解决方案固有的扩展限制。
16.2.2值迭代的信念空间
在上一节显示，通过实例，如何计算有限世界的价值功能。现在让我们回到价值迭代的一般问题在信念空间。特别是，在介绍这一章中，我们指出了价值函数，我们简要地重申这里的基本更新方程：
CT（B）=最大
？并[c（Δb）的+ CT-1的（b）〕P（B |？的a，b）分贝？
一
（16.29）
在这个和下面的章节中，我们将开发一个通用的算法值IT-关合作信仰空间，可在数字计算机上实现。首先，我们注意到，公式（16.2）提出一个集成了所有的信念，每一个信念是一个概率分布。如果状态空间是有限的，并且状态数为n，
所有的概率分布的空间是具有维数n-1的连续体。看，我们注意到，n-1个的数值是必需的，以指定在n个离散事件的概率分布（第n参数可以省略，因为概率加起来
1）。如果状态空间是连续的，信念空间具有无限多的维度。因此，整合了所有的信念似乎是计算艰巨的任务。然而，我们可以通过重新制定的问题，并整合避免这种集成在观察代替。
让我们看看条件概率P（B|？A，B），其中规定了在分配后的信念B'给定一个信念b和动作的。如果只有b和a是已知的，该
后路信念B'不是唯一的，和P（B |？的a，b）是在信仰一个真正的概率分布。但是，如果如果我们也知道测量Ò？执行行动时，后
后路B'是独特的，P（B|？的a，b）是一个简并点质量分布。为什么会这样？答案由贝叶斯过滤器提供。从信仰b动作之前
执行，动作，和随后的观测O 3，贝叶斯过滤器计算一个单一的，后部信念B'这是单一的，正确的信念。因此，我们得出结论，只要我们知道2 O 3，整合过的（16.2）所有的信念会被淘汰。
这种洞察力可以通过重新表达P为利用（B |？A，B）=？ P（B|？A，B，O）P（O|？A，B）呢？
（16.30）
其中，P（B |？的a，b，邻）是集中于单一信念calcu-由贝叶斯滤波器迟来的点 - 质量分布。这堵成积分值迭代的定义
（16.2），我们得到
CT（B）=最大
？ ？ [C（B？）+ CT-1（B？）P（B |？A，B，O）？DB类P（o|？A，B）呢？ （16.31）
一
内积分？ [C（？B）+ CT-1（B？）P（B |？A，B，O）分贝？
（16.32）
仅包含一个非零项。这是术语其中b？从B，A和O的分布计算出来的？使用贝叶斯过滤器。让我们称此分布B（B，A，邻？），即B（？B，A，O）（S）= P（S|2 O 3，A，B）
= P（O|？的？A，B），P（S|？A，B）P（O|？A，B）
类P（o|？A，B）P（O|？的？）？ P（S|？一个，B，S）P（S|的a，b）的ds1
=
类P（o|？A，B）P（O|？的？）？ P（S|？A，S）B（S）DS1
=（16.33）
读者应该认识到，进行了广泛的第2章中讨论的贝叶斯熟悉推导过滤器，这一次正规化作出了明确。我们注意到，
正规化，P（O|？A，B），在值更新方程（16.31）的一个因素。因此，代B（B，A，O 2）成（16.31）消除了这一术语，从而导致了值迭代算法的递归描述：
CT（B）=最大
？ [C（B（B，A，O）？）+ CT-1（B（B，A，O））] p（O|？A，B）呢？ （16.34）
一这种形式是比在（16.2）更加方便，因为它只需要整合所有可能的测量O 2，而不是所有可能的置信度分布b？这种转变是派生此一章所有值迭代算法的一个重要观点。事实上，它是含蓄地用在上面的例子中，在一个新的价值函数是由有限多个分段线性函数混合在一起方程（16.22）获得。
下面，这将是方便的分割最大化在从积分动作。因此，我们会注意到（16.34）可以改写为下列两个等式：
CT（二，一）=？ [C（B（B，A，O）？）+ CT-1（B（B，A，O））] p（O|？A，B）呢？
CT（B）=最大了CT（B，A）
（16.35）（16.36）
在这里，CT（B，A）是在信念b假设立即下一个动作是在地平线的T值的功能。

16.2.3计算价值功能
在我们的例子中，最优值函数是分段线性和凸。这是特定于该例子，或这是有价值的功能有限世界的一般特征？幸运的是，事实证明，后者是这样的：在有限的POMDPs所有最优值函数与有限的地平线是分段线性和凸。分段线性度意味着价值函数CT由线性函数的集合表示。如果CT是线性的，它可以通过一组系数的CT来表示
1，。 。 。 ，CT N：CT（B）= CT（。P1，PN）= N
？
CT我PI
I = 1
（16.37）
其中，像往常一样，P1。 。 。 ，PN是一种信仰分布的参数。在我们的示例中，分段线性和凸值函数CT（B）可以通过集合OFK线性函数的最大值表示
ñ
CT（B）=最大
？
CT K，IPI
ķ
I = 1
（16.38）
其中，CT K，1，。 。 。 ，CT K，n分别表示第k个线性函数的参数，以及K德
注意到的线性片段的数量。读者应该很快说服自己，一组有限的线性函数的最大值确实是凸的分段线性，凸函数。
在值迭代，初始值函数由C0 = 0给出
（16.39）
我们注意到，这个数值函数是线性的，因此，顾名思义它也是分段线性和凸。这种分配建立了递归值迭代算法（微不足道）的基线。
我们将nowderive递归方程计算值functionCT（b）中。该公式假定较早的值功能的一个时间步长，CT-1（b）中，由一个分段线性函数如上规定表示。作为派生的一部分，我们将假设thatCT-1（b）是分段线性和凸出下showthat，CT（b）是也分段线性和凸出的。感应在规划期内T接证明，用有限的视距所有的价值功能的确是分段线性和凸。
方程（16.35）和（16.36）声明如下：
CT（二，一）=？ [C（B（B，A，O）？）+ CT-1（B（B，A，O））] p（O|？A，B）呢？
CT（B）=最大了CT（B，A）
（16.40）（16.41）
在有限的空间中，所有的积分可以通过有限的款项被取代，我们得到：
CT（B，A）=γ？
？C（B（B，A，O 2））+ CT-1（B（B，A，O 2））？类P（o|？A，B）（16.42）
Ø？
CT（B）=最大了CT（B，A）
（16.43）
相信B（？B，A，O）使用下面的表达式获得，其中“转化”式（16.33），用所述积分由一笔有限空间：
B（？B，A，O）（S？）= P（O|？A，B）P（O|？S）？P（S|？A，S）B（S）1秒（16.44）
如果信念B由参数{p1的表示，。。。 ，PN}和信念B（B，A，O 2）由{对？
1，。 。 。页？
n}的，信仰b的第i个参数？的计算方法如下：
对'I =
ñ
1
类P（o|？A，B）P（O|？？的I）
？
P（S I |？一，SJ）PJ
J =1
（16.45）
读者可以识别thatwas已经长在第4.1章，其中介绍了基本的过滤理论讨论离散贝叶斯过滤器。
要计算价值函数CT（B，A），我们将现在的条件c中衍生出更多实用的表达式中（B（B，A，O 2））和CT-1（B（B，A，O 2） ），开始与所述一个中（16.42）。与我们的参数B（B，A，O 2）={对？
1，。 。 。页？ N}，我们得到了
项C（B（B，A，O））：C（B（B，A，O））=（P？
1，。 。 。页？ N）= N
？
CIP？我
I = 1
代（16.45）这个表达给我们
（16.46）
C（B（B，A，O 2））=
= N N
？
1 CI
类P（o|？A，B）P（O|？？的I）
？
P（S I |？一，SJ）PJ
I = 1
J =1
N N1
？
我）
？
P（S类P（o|？A，B）CI类P（o|？的我？|一，SJ）PJ
I = 1
J =1
（16.47）
后者变换是合法的，因为项P（邻？|的a，b）不依赖于岛这种形式仍然包含一个表达式，它是很难计算的：P（O| A，B？）。然而，有限的情况下的美妙之处在于这种表达抵消，我们将会看到很快。
因此，它不必被任何进一步在这一点上考虑。
术语CT-1的推导（B（B，A，O 2））（16.42）是类似的C（B（B，A，O 2））以上。特别是，我们具有由值functionCT-1，这是唯一的分段线性和凸出，以取代直接回报函数角这给了我们
Ñ的CT-1（为B（b，一，邻？））= CT-1（对α1，。。，第？名词）=最大
？
CT-1 K，I P？ I K
I = 1
（16.48）
对于套线性函数参数CT-1 K，I。如上所述，我们现在替换后的信念B的defini-化（见（16.45））这个表达式，并获得：
？
N N
？
1
= MAX
？
ķ
？
CT-1 K，I
I = 1
类P（o|？A，B）P（O|？？的I）
？
P（S I |？一，SJ）PJ
？
J =1
（16.49）
项P（ω0| A，B）-1，可移出的总和和最大化的，因为它不依赖于i或K：
=
？
N N
？
1个P（O|？A，B）最大值
？
？
CT-1 K，I P（O|？？的I）
？
P（S I |？一，SJ）PJķ
？
I = 1
J =1
（16.50）
它可能并不明显，在该表达式也是分段线性和凸出的。然而，重新排序的总和内的条款为我们提供了以下表达式：
=
？
N + 1？ ñ
？
类P（o|？A，B）最大值
？
？
ķ
？
PJ CT-1 K，I P（O|？？的I）P（S I |？一，SJ）
？ （16.51）
J =1
I = 1
在这种形式下，很容易验证，对于任何k的固定值，最大化的参数是确实线性的参数PJ。这些线性片的最大值为，因而，分段线性和凸出的。此外，线性件的数量是有限的。
现在让我们回到主要问题解决在本节中，即问题的计算CT（B，A），该值函数地平线T.我们简要地重申方程（16.42）：
CT（B，A）=γ？
？C（B（B，A，O 2））+ CT-1（B（B，A，O 2））？类P（o|？A，B）（16.52）
Ø？
让我们首先计算的总和C（B（B，A，O）？）+ CT-1（B（B，A，O）？），用公式（16.47）和（16.50）：
C（B（B，A，O 2））+ CT-1（B（B，A，O 2））
= n n 1
?
P(o?|a, b) ci P(o?|s? i)
?
P(s? i|a, sj) pj
i=1
j=1
?
n n
?
+ 1 P(o?|a, b) max
?
?
CT−1 k,i P(o?|s? i)
?
P(s? i|a, sj) pj k
?
i=1
j=1
(16.53) With some reordering, we obtain
c(B(b, a, o?))+CT−1(B(b, a, o?))
?
n n
?
1
=
P(o?|a, b) max
?
?
(ci +CT−1 k,i )P(o?|s? i)
?
P(s? i|a, sj) pj k
? (16.54)
i=1
j=1
Substituting this expression into Equation (16.52) gives us: ? n
CT (b, a) = γ?
? 1 P(o?|a, b) max
?
(ci +CT−1 k,i ) k
o?
i=1
n
?
? ?
P(o?|s? i)
?
P(s? i|a, sj) pj
?
P(o?|a, b)
j=1
? (16.55)
我们注意到，项P（邻|的a，b？）出现在枚举和在此表达式的分母，从而抵消了：
？
N N
？
CT（B，A）=γ？
最大
？
？
（CI+ CT-1 K，I）P（O|？？的I）
？
P（S I |？一，SJ）PJ（16.56）
ķ
？
Ø？
I = 1
J =1
这消除是在有限的世界的POMDP的溶液，相对于上一节中描述的一般解决方案，它占了一个更简单的更新方程的一个基本特征。所需的价值函数，然后通过最大化CT得到（B，A）在所有行动：
CT（B）=最大了CT（B，A）
（16.57）
那样容易验证，CT（b）是确实分段线性和凸出的信念索引的参数P1，。 。 。 ，PN。具体地，对于每个固定钾（16.56）的大括​​号内的术语是线性的。这些k个线性函数的最大值是一个分段线性函数，包括最多有K线性件。分段线性，连续的凸函数的总和为再次分段线性和凸出的。因此，总和超过所有观测Ø？再次产生一个分段线性凸函数。最后，MAX-imization在所有行动方程（16.57），再次导致了分段线性的凸函数。因此，我们的结论是CT（b）是分段线性和凸出的任何有限时域T。
16.2.4线性规划解决方案
我们如何可以把数学洞察可以进行在有限时间数字计算机上的算法？正如上面的例子中，关键的见解是，解决方案式像一个以上的可利用线性规划来计算。线性规划为下直线约束优化问题的解决方案。
假设我们知道，C = MAXA：1≤a≤mx（一）
（16.58）
对于一些虚拟集值x（一），以及一些正整数微米。解决这个方程可以由具有ofmlinear约束的集合，一个用于一个每个可能值的线性程序来获得：
Φ={C≥X（一）}（16.59）
然后，通过减少℃在这些约束，这是一个标准的线性规划问题得到C的值。现在假设我们得到了稍微复杂的表达式
C = N
？
一个最大：1≤a≤mx（A，I）
我
（16.60）
对于一些虚拟值x（一，一）和一些正整数n。我们怎样才能获得通过线性规划解决这个问题呢？显然，对于每个i有可能是
不同的一个最大化的内项x（一，一）。因此，要解决这个问题就获得一组特定值的一个，一个用于在所述总和的每个元素。让我们一会儿假设我们知道的那些值。如果我们用这一组由一个（1），。。。中，（n）的，我们有
C = N
？
X（一个（ⅰ），ⅰ）
我
这给了我们一个线性约束（16.61）NΦ={C≥
？
X（A（I）中，i）}
我
（16.62）
不幸的是，我们不知道的（ⅰ）中的值，其中C达到其最大值。因此对于（16.60）线性规划溶液含有一个约束任何这样的序列的（一）：
N + {C≥
？
X（A（I）中，i）}一（一）：1≤a（ⅰ）≤M，1≤i≤n
我
（16.63）
约束的总数为Mn，由于有n个自由变量a（ⅰ），其中每个可以取m个不同的值。这个约束集可确保最大化约束（多个）总是包含。根据这些限制最小化C，那么产生的（16.60）的解决方案。
我们也注意到，通常的做法是，以划分组约束成主动和被动约束，取决于他们是否积极限制为C的溶液在此特定实例中，有效约束是其中的最大MAXA X（a）中获得;而被动约束对应于更小的X（一） - 值。如果大家有兴趣的最大化表达式（以下简称“argmax”）的值，我们只需选择一个一个，其相应的约束是有效的。活性约束很容易识别使用任何现有的线性编程算法。
这些见解使我们能够计算最优值函数和最优政策提供了具体的算法。最初，地平线T = 1，值函数
被定义为（16.39），我们简要重申在这里：
ñ
C1=γ
？
C（SI）PI
I = 1
相应约束集仅包含单个约束：
（16.64）N
Φ1={C1≤γ
？
C（SI）PI}
I = 1
（16.65）的约束集Φ1下最小化的C1得到所需的溶液。
现在让我们考虑如何构建约束的约束集ΦT-1的设定ΦT。根据方程（16.56）和（16.57），所希望的值的功能是
？
N N
？
CT（二）=γ最大
？
最大
？
？
（CI+ CT-1 K，I）P（O|？？的I）
？
P（S I |？一，SJ）PJ
一
ķ
？
Ø？
I = 1
J =1
（16.66）
其形状以上述（式（16.60））讨论了线性约束类似。为每个操作，因此，我们必须生成与下列组约束：
？一
？ ？
CT（B）≤γ？
K（o）：1≤k（O？）≤|ΦT-1|
Ø？
ñ
ñ
？
？
（CI + CT-1
？
K（O 3），我）P（O|？？的I）
？
P（S I |？一，SJ）PJ
I = 1
J =1
？ （16.67）
这是|邻||ΦT-1|线性约束。这里|Ø|表示的若干意见，并|ΦT-1|是地平线牛逼得约束集的数量 - 1约束的总数是在乘动作的数量| A|，因此我们简单的解决方案，成于
|ΦT|=| A |·|邻||ΦT-1|（16.68）
表16.1 POMDP算法离散的世界。该算法表示由一组约束，这是递归计算最优值函数。
约束地平线T，与边界条件|Φ1|=1。表16.1描述了值迭代算法有限POMDP。